<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jiffy Junk Volume Assistant</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <h1>Jiffy Junk Volume Assistant</h1>
      <nav>
        <a href="/history.html">History</a>
        <button id="logoutBtn" class="linkbtn">Logout</button>
      </nav>
    </header>

    <section id="loginCard" class="card">
      <h2>Enter PIN</h2>

      <div class="app-description">
        <p>An AI-powered web application that analyzes job site photos to estimate junk removal volumes in cubic yards, improving quote accuracy and operational efficiency.</p>

        <p><strong>What It Does:</strong></p>
        <ul>
          <li><strong>Computer Vision Analysis:</strong> Leverages advanced AI to analyze photos and calculate debris volume with confidence ratings</li>
          <li>Supports photo markup (green/red overlays) to specify exactly what should be included or excluded</li>
          <li>Handles multiple job types: standard removal, dumpster cleanouts, and overflow scenarios</li>
          <li>Maintains searchable history of all estimates with agent tracking</li>
        </ul>

        <p><strong>Key Innovation:</strong> The system incorporates real-world junk removal physics—packing factors, reference object scaling, container volumes, and debris type recognition—to deliver industry-specific estimates rather than generic AI responses.</p>

        <p class="hint">Built for field teams to get fast, consistent volume estimates with full audit trails.</p>
      </div>

      <div class="row">
        <input id="pin" type="password" placeholder="PIN" />
        <button id="loginBtn">Unlock</button>
      </div>
      <p id="loginErr" class="err"></p>
    </section>

    <section id="appCard" class="card hidden">
      <div class="grid">
        <div>
          <label>Agent label (optional)</label>
          <input id="agentLabel" type="text" placeholder="e.g., Adam / CS1" />

          <label>Job type</label>
          <div class="radio">
            <label><input type="radio" name="jobType" value="STANDARD" checked /> Standard Junk Removal</label>
            <label><input type="radio" name="jobType" value="DUMPSTER_CLEANOUT" /> Dumpster Cleanout</label>
            <label><input type="radio" name="jobType" value="DUMPSTER_OVERFLOW" /> Dumpster Overflow / Arms-length</label>
          </div>

          <div id="dumpsterBox" class="hidden">
            <label>Dumpster size</label>
            <select id="dumpsterSize">
              <option value="UNKNOWN">Unknown</option>
              <option value="2">2 yard</option>
              <option value="4">4 yard</option>
              <option value="6">6 yard</option>
              <option value="8">8 yard</option>
              <option value="10">10 yard</option>
            </select>
          </div>

          <label>Notes (optional)</label>
          <textarea id="notes" placeholder="Example: mark items staying with red, include items to remove with green"></textarea>

          <label>Upload photos</label>
          <input id="photos" type="file" accept="image/*" multiple />

          <p class="hint">
            Mark photos if needed:
            <b>Green = include (remove)</b>, <b>Red = exclude (stays)</b>.
          </p>

          <div id="markups"></div>

          <button id="estimateBtn" class="primary">Estimate volume</button>
        </div>

        <div>
          <label>Result</label>
          <pre id="out" class="out">Waiting…</pre>
          <div class="row">
            <button id="copyBtn">Copy</button>
            <span id="savedMsg" class="hint"></span>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="/app.js"></script>
</body>
</html>
